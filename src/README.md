# Исходный код бота

## Структура проекта

```
src/
├── bot/           # Основной модуль бота
│   ├── handlers/  # Обработчики команд
│   ├── keyboards/ # Клавиатуры
│   ├── middlewares/ # Middleware компоненты
│   └── settings.py # Настройки бота
├── controllers/   # Контроллеры бизнес-логики
├── repositories/  # Репозитории для работы с базой данных
└── utils/         # Вспомогательные функции
```

## Описание модулей

### bot/
Основной модуль бота, содержащий:
- `handlers/` - обработчики команд и сообщений
  - `common.py` - общие команды (старт, помощь и т.д.)
  - `coworking.py` - управление коворкинг-пространством
  - `profile.py` - управление профилем пользователя
  - `club.py` - управление клубом
  - `itam.py` - специальные команды ITAM
  - `broadcast.py` - рассылка сообщений
- `keyboards/` - клавиатуры для команд
- `middlewares/` - middleware компоненты
  - `user.py` - обработка пользователей
  - `coworking_controller.py` - управление коворкингом
  - `club_controller.py` - управление клубом
  - `locale.py` - локализация
  - `scheduler.py` - планировщик задач
  - `settings.py` - настройки
  - `bot.py` - основной функционал бота
- `settings.py` - настройки бота и подключения к базам данных

### controllers/
Контроллеры, реализующие бизнес-логику:
- Управление пользователями
- Управление коворкинг-пространством
- Управление клубом
- Система бронирования

### repositories/
Репозитории для работы с базой данных:
- `users.py` - работа с пользователями
- `coworking.py` - работа с коворкинг-пространством
- `club.py` - работа с клубом

### utils/
Вспомогательные функции и утилиты:
- Форматирование данных
- Валидация
- Общие утилиты

## Основные компоненты

### Middleware
- `UserMiddleware` - обработка пользователей и их профилей
- `CoworkingMiddleware` - управление коворкинг-пространством
- `ClubMiddleware` - управление клубом
- `Localization` - многоязычная поддержка
- `SettingsMiddleware` - настройки бота
- `BotMiddleware` - основной функционал
- `SchedulerMiddleware` - планировщик задач

### Обработчики
- Общие команды (/start, /help)
- Управление коворкингом (бронирование, статус)
- Управление профилем
- Клубные мероприятия
- Специальные команды ITAM
- Система рассылки

### Репозитории
- `UserRepositoryPostgres` - работа с пользователями
- `CoworkingRepositoryPostgres` - работа с коворкингом
- `ClubRepositoryPostgres` - работа с клубом

## Разработка

### Добавление новых команд
1. Создайте новый обработчик в `bot/handlers/`
2. Добавьте необходимые клавиатуры в `bot/keyboards/`
3. Зарегистрируйте роутер в `main.py`

### Добавление middleware
1. Создайте новый класс middleware в `bot/middlewares/`
2. Добавьте его в список middleware в `main.py`

### Работа с базой данных
1. Создайте новый репозиторий в `repositories/`
2. Реализуйте необходимые методы
3. Используйте в контроллерах 