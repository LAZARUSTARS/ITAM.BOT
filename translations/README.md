# Система локализации

Этот каталог содержит файлы локализации для Telegram бота ITAM. Система использует формат `.po` для хранения переводов и поддерживает несколько языков.

## Структура каталога

```
translations/
├── messages.pot      # Шаблон с исходными строками для перевода
├── ru/              # Русские переводы
│   └── LC_MESSAGES/
│       └── messages.po
└── en/              # Английские переводы
    └── LC_MESSAGES/
        └── messages.po
```

## Как это работает

1. `messages.pot` - это файл-шаблон, содержащий все строки, которые нужно перевести. Он создается автоматически при запуске команды для извлечения строк.

2. Каждый язык имеет свой каталог с кодом языка (например, `ru` для русского, `en` для английского) и подкаталог `LC_MESSAGES/`, где хранится файл перевода `messages.po`.

3. Файлы `.po` содержат переводы строк на соответствующий язык.

## Добавление нового языка

1. Создайте новый каталог с кодом языка (например, `de` для немецкого)
2. Создайте подкаталог `LC_MESSAGES/`
3. Скопируйте `messages.pot` в `LC_MESSAGES/messages.po`
4. Отредактируйте файл перевода, добавив переводы для каждой строки

## Работа с переводами

### Извлечение строк для перевода

```bash
pybabel extract -F babel.cfg -o messages.pot .
```

### Обновление файлов переводов

```bash
pybabel update -i messages.pot -d translations
```

### Компиляция переводов

```bash
pybabel compile -d translations
```

## Формат файла перевода

Каждая строка в файле `.po` имеет следующую структуру:

```po
#: path/to/file.py:123
msgid "Original string"
msgstr "Переведенная строка"
```

- `msgid` - оригинальная строка на английском языке
- `msgstr` - перевод на целевой язык
- Комментарии (начинающиеся с #) содержат информацию о контексте и расположении строки

## Лучшие практики

1. Всегда добавляйте контекстные комментарии к строкам перевода
2. Используйте плейсхолдеры для динамических значений: `{variable}`
3. Сохраняйте форматирование HTML-тегов в переводах
4. Проверяйте корректность перевода перед компиляцией

## Добавление новых строк

При добавлении новых строк в код:

1. Используйте функцию `_()` для строк, требующих перевода:
   ```python
   from aiogram.utils.i18n import gettext as _
   
   message = _("Hello, world!")
   ```

2. После добавления новых строк выполните:
   ```bash
   pybabel extract -F babel.cfg -o messages.pot .
   pybabel update -i messages.pot -d translations
   ```

3. Добавьте переводы в файлы `.po` для каждого языка
4. Скомпилируйте переводы:
   ```bash
   pybabel compile -d translations
   ``` 